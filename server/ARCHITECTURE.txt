┌─────────────────────────────────────────────────────────────────┐
│                     Food Delivery Application                    │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                        Application Layer                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌──────────────┐      ┌──────────────┐      ┌──────────────┐  │
│  │   Express    │──────│    Routes    │──────│  Middleware  │  │
│  │   Server     │      │  /api/...    │      │   (CORS,     │  │
│  │  :3000       │      │              │      │   Helmet)    │  │
│  └──────────────┘      └──────────────┘      └──────────────┘  │
│         │                      │                                 │
│         └──────────────────────┘                                 │
│                    │                                              │
└────────────────────┼──────────────────────────────────────────────┘
                     │
                     ▼
┌─────────────────────────────────────────────────────────────────┐
│                      Database Layer                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │              Database Connection Pool                     │  │
│  │              (src/config/database.ts)                     │  │
│  │  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐         │  │
│  │  │ Client │  │ Client │  │ Client │  │  ...   │         │  │
│  │  │   1    │  │   2    │  │   3    │  │        │         │  │
│  │  └────────┘  └────────┘  └────────┘  └────────┘         │  │
│  │  Min: 2 connections  |  Max: 10 connections              │  │
│  └──────────────────────────────────────────────────────────┘  │
│                              │                                   │
└──────────────────────────────┼───────────────────────────────────┘
                               │
                               ▼
┌─────────────────────────────────────────────────────────────────┐
│                      Docker Layer                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌────────────────────────┐      ┌─────────────────────────┐   │
│  │   PostgreSQL 16        │      │      pgAdmin 4          │   │
│  │   (Alpine)             │      │   (Web Interface)       │   │
│  │                        │      │                         │   │
│  │   Port: 5432           │      │   Port: 5050            │   │
│  │   User: postgres       │      │   Login: admin@...      │   │
│  │   DB: food_delivery    │      │                         │   │
│  │                        │      │                         │   │
│  │  ┌──────────────────┐ │      │                         │   │
│  │  │  Volume:         │ │      │                         │   │
│  │  │  postgres_data   │ │      │                         │   │
│  │  └──────────────────┘ │      │                         │   │
│  └────────────────────────┘      └─────────────────────────┘   │
│                                                                   │
│  Network: food-delivery-network                                  │
└─────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────┐
│                      Request Flow                                │
└─────────────────────────────────────────────────────────────────┘

  Client Request
       │
       ▼
  ┌─────────┐
  │ Express │  Port 3000
  │ Server  │
  └─────────┘
       │
       ▼
  ┌─────────┐
  │ Routes  │  /api/users, /api/health
  └─────────┘
       │
       ▼
  ┌─────────────┐
  │ Database    │  db.query()
  │ Module      │
  └─────────────┘
       │
       ▼
  ┌─────────────┐
  │ Connection  │  Pool Client
  │ Pool        │
  └─────────────┘
       │
       ▼
  ┌─────────────┐
  │ PostgreSQL  │  Port 5432
  │ Container   │
  └─────────────┘
       │
       ▼
  ┌─────────────┐
  │ Database    │  food_delivery
  │ Response    │
  └─────────────┘
       │
       ▼
  JSON Response to Client


┌─────────────────────────────────────────────────────────────────┐
│                      Database Schema                             │
└─────────────────────────────────────────────────────────────────┘

  ┌──────────────────────────────────────────────┐
  │                 users                         │
  ├──────────────────────────────────────────────┤
  │ id              SERIAL PRIMARY KEY            │
  │ uuid            UUID UNIQUE NOT NULL          │
  │ email           VARCHAR(255) UNIQUE NOT NULL  │
  │ password_hash   VARCHAR(255) NOT NULL         │
  │ first_name      VARCHAR(100)                  │
  │ last_name       VARCHAR(100)                  │
  │ phone           VARCHAR(20)                   │
  │ role            VARCHAR(50) DEFAULT 'customer'│
  │ created_at      TIMESTAMP DEFAULT NOW()       │
  │ updated_at      TIMESTAMP DEFAULT NOW()       │
  └──────────────────────────────────────────────┘
  
  Indexes:
  - idx_users_email (email)
  - idx_users_uuid (uuid)


┌─────────────────────────────────────────────────────────────────┐
│                      File Structure                              │
└─────────────────────────────────────────────────────────────────┘

server/
├── docker-compose.yml          # Docker services configuration
├── init-scripts/
│   └── 01-init.sql            # Database initialization
├── src/
│   ├── config/
│   │   ├── index.ts           # App configuration
│   │   └── database.ts        # Database connection pool
│   ├── routes/
│   │   ├── index.ts           # Route aggregator
│   │   └── api.routes.ts      # API endpoints
│   ├── app.ts                 # Express app setup
│   └── index.ts               # Server entry point
├── .env                        # Environment variables
├── .env.example               # Environment template
├── DATABASE.md                # Full documentation
├── QUICK_START_DB.md          # Quick reference
└── DATABASE_SETUP_SUMMARY.md  # Setup summary
